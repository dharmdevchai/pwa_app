

<!DOCTYPE html>
<html lang="en">
<head>
   <link rel="manifest" href="manifest.json">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catch the Ball</title>
<style>
    body { margin:0; overflow:hidden; background: #222; }
    canvas { display:block; background: #333; }
    #score { position:absolute; top:10px; left:10px; color:white; font-size:24px; }
    #controls {
        position:absolute; bottom:20px; width:100%; display:flex; justify-content:space-around; z-index:10;
    }
    .btn {
        width:60px; height:60px; border-radius:50%; background: rgba(255,255,255,0.5);
        text-align:center; line-height:60px; font-size:30px; user-select:none;
    }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<canvas id="gameCanvas"></canvas>
<div id="controls">
    <div class="btn" id="leftBtn">&#8592;</div>
    <div class="btn" id="rightBtn">&#8594;</div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

let score = 0;

// Basket
const basket = { x: canvas.width/2, y: canvas.height-80, width: 100, height: 30, speed: 8, dx: 0 };

// Ball
const balls = [];
const ballSpeed = 5;
const ballInterval = 1000;

// Keyboard
const keys = {};
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Touch controls
document.getElementById('leftBtn').addEventListener('touchstart', () => basket.dx = -basket.speed);
document.getElementById('leftBtn').addEventListener('touchend', () => basket.dx = 0);
document.getElementById('rightBtn').addEventListener('touchstart', () => basket.dx = basket.speed);
document.getElementById('rightBtn').addEventListener('touchend', () => basket.dx = 0);

// Basket functions
function drawBasket() { ctx.fillStyle = 'orange'; ctx.fillRect(basket.x, basket.y, basket.width, basket.height); }
function moveBasket() {
    if(keys['ArrowLeft']) basket.x -= basket.speed;
    if(keys['ArrowRight']) basket.x += basket.speed;
    basket.x += basket.dx;
    if(basket.x < 0) basket.x = 0;
    if(basket.x + basket.width > canvas.width) basket.x = canvas.width - basket.width;
}

// Balls
function createBall() { balls.push({ x: Math.random()*(canvas.width-30), y: -30, radius: 15 }); }
function drawBalls() { ctx.fillStyle = 'red'; balls.forEach(b => ctx.beginPath(), ctx.arc(b.x,b.y,b.radius,0,Math.PI*2), ctx.fill()); }
function moveBalls() {
    balls.forEach((b,i) => {
        b.y += ballSpeed;
        if(b.y - b.radius > canvas.height) balls.splice(i,1);
    });
}

// Collisions
function checkCollisions() {
    balls.forEach((b,i) => {
        if(b.y + b.radius > basket.y && b.x > basket.x && b.x < basket.x + basket.width) {
            balls.splice(i,1);
            score++;
            document.getElementById('score').textContent = 'Score: ' + score;
        }
    });
}

// Game loop
function update() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    moveBasket(); moveBalls();
    drawBasket(); drawBalls();
    checkCollisions();
    requestAnimationFrame(update);
}

// Start
setInterval(createBall, ballInterval);
update();
</script>
 <script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(reg => console.log('Service Worker registered:', reg))
          .catch(err => console.error('SW registration failed:', err));
      });
    }

    // Optional: Listen for beforeinstallprompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      console.log("PWA install prompt available!");
      // You can show your own "Install" button here
    });
  </script>
</body>
</html>



